library(baseballr)
library(tidyverse)
ls("package:baseballr")

players<- fg_pitch_leaders(startseason = 2024, endseason = 2024)
players <- players %>%
  filter(IP >= 27)

pitcher_logs_2024 <- list()  # named list to store each pitcher's data

for (i in 1:nrow(players)) {
  name <- players$PlayerName[i]
  id <- players$playerid[i]
  
  message("Fetching data for: ", name)
  
  # Use tryCatch to skip failed scrapes gracefully
  logs <- tryCatch({
    Sys.sleep(2)  # be polite to FanGraphs!
    pitcher_game_logs_fg(playerid = id, year = 2024)
  }, error = function(e) {
    message("Failed for: ", name)
    return(NULL)
  })
  
  # Save the logs under the player's name
  pitcher_logs_2024[[name]] <- logs
}

ChrisSale <- pitcher_logs_2024$`Chris Sale`
